/* Unified Design Tokens - Source of Truth from Case Detail */
:root {
  /* Colors (from Case Detail palette) */
  --bg: #f8f9fa;
  --bg-elev: #ffffff;
  --border: rgba(0,0,0,.08);
  --text: #0b0b0c;
  --text-muted: #6b7280;
  --accent: #2563eb;
  --accent-cta: #1d4ed8;
  --accent-muted: #e0e7ff;
  --success: #059669;
  --warning: #d97706;
  --danger: #dc2626;

  /* Effects */
  --radius: 8px;
  --radius-lg: 10px;
  --shadow: 0 8px 24px rgba(0,0,0,.25);
  --ring: 0 0 0 2px color-mix(in srgb, var(--accent) 40%, transparent);

  /* Spacing & type scale */
  --space-0: 0;
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --fs-xs: .78rem;
  --fs-sm: .88rem;
  --fs-md: 1rem;
  --fs-lg: 1.125rem;
  --fs-xl: 1.25rem;
  --fs-2xl: 1.5rem;

  /* Legacy tokens for backward compatibility */
  --radius-card: var(--radius-lg);
  --radius-button: 14px;
  --radius-chip: 12px;
  --elev-1: 0 1px 2px rgba(0,0,0,.06), 0 1px 1px rgba(0,0,0,.04);
  --elev-2: 0 6px 16px rgba(0,0,0,.08), 0 2px 8px rgba(0,0,0,.04);
  --surface: var(--bg);
  --surface-alt: var(--bg-elev);
  --surface-muted: #f4f4f5;
  --text-subtle: var(--text-muted);
  --brand: var(--text);
  --brand-2: #111827;

  /* HAC emphasis surfaces */
  --hac-bg: #0b1220;
  --hac-panel: #0e1626;
  --hac-ring: 0 0 0 2px rgba(59,130,246,.35);

  /* Polish Citizenship Agent tokens */
  --pc-card-bg: rgba(18,20,24,0.8);
  --pc-card-border: rgba(142,151,166,0.16);
  --pc-card-glow: 0 8px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.04);
  --pc-radius-2xl: 12px;
  --pc-radius-xl: 8px;
  --pc-pill: 999px;
  --pc-focus: 0 0 0 2px rgba(80,150,255,0.55), 0 0 0 6px rgba(80,150,255,0.18);
  --pc-text-dim: rgba(235,237,240,0.75);
  --pc-surface: #0f1216;
  --pc-text-primary: rgba(255,255,255,0.95);
  --pc-text-secondary: rgba(255,255,255,0.75);
  --pc-text-muted: rgba(255,255,255,0.55);
  --pc-btn-primary: linear-gradient(135deg, #3b82f6, #1d4ed8);
  --pc-btn-secondary: rgba(255,255,255,0.1);
  --pc-btn-hover: rgba(255,255,255,0.15);
  --pc-success: #10b981;
  --pc-warning: #f59e0b;
  --pc-danger: #ef4444;
  --pc-info: #3b82f6;
}

/* Typography Scale */
html { font-size: 17px; }
@media (min-width: 768px) { html { font-size: 18px; } }

/* Class-based dark mode - user controlled */
.dark {
  /* Dark theme mapping to Case Detail dark values */
  --bg: #0f1115;
  --bg-elev: #1a1d23;
  --border: rgba(255,255,255,.08);
  --text: #ededf0;
  --text-muted: #9aa0a6;
  --accent: #60a5fa;
  --accent-cta: #3b82f6;
  --accent-muted: #1e3a8a;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;

  /* Legacy dark overrides */
  --surface: var(--bg);
  --surface-alt: var(--bg-elev);
  --surface-muted: #0b0d11;
  --text-subtle: var(--text-muted);
  --brand: var(--text);
  --brand-2: #dfe3e7;
  --hac-bg: #070b14;
  --hac-panel: #0a101c;
}

/* Token Utilities */
.token-card {
  border-radius: var(--radius-card);
  box-shadow: var(--elev-1);
  background: var(--surface);
}

.token-card-strong {
  border-radius: var(--radius-card);
  box-shadow: var(--elev-2);
  background: var(--surface);
}

.token-chip {
  border-radius: var(--radius-chip);
  background: var(--surface-muted);
}

.token-btn {
  border-radius: var(--radius-button);
}

.token-ring:focus {
  box-shadow: var(--ring);
  outline: none;
}

.hairline {
  border: 1px solid rgba(0,0,0,.08);
}

.hairline-strong {
  border: 1px solid rgba(0,0,0,.12);
}

/* Dark mode hairlines */
.dark .hairline {
  border: 1px solid rgba(255,255,255,.08);
}

.dark .hairline-strong {
  border: 1px solid rgba(255,255,255,.12);
}

/* Polish Citizenship Agent Component Styles */
.pc-card {
  border-radius: var(--pc-radius-2xl);
  border: 1px solid var(--pc-card-border);
  background: var(--pc-card-bg);
  box-shadow: var(--pc-card-glow);
  backdrop-filter: blur(16px);
  transition: transform 200ms ease, box-shadow 200ms ease;
}

.pc-card:hover {
  transform: scale(1.01);
}

.pc-card:active {
  transform: scale(0.99);
}

.pc-btn {
  border-radius: var(--pc-pill);
  padding: 8px 16px;
  font-size: 14px;
  font-weight: 500;
  transition: all 150ms ease;
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  min-height: 44px;
}

.pc-btn--sm {
  padding: 6px 12px;
  font-size: 13px;
  min-height: 36px;
}

.pc-btn--lg {
  padding: 10px 20px;
  font-size: 16px;
  min-height: 48px;
}

.pc-btn--xl {
  padding: 12px 24px;
  font-size: 18px;
  min-height: 52px;
}

.pc-btn--icon {
  gap: 8px;
}

.pc-btn--icon svg {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.pc-btn:focus-visible {
  outline: none;
  box-shadow: var(--pc-focus);
}

.pc-btn--primary {
  background: var(--pc-btn-primary);
  color: white;
}

.pc-btn--primary:hover {
  filter: brightness(1.1);
  transform: translateY(-1px);
}

.pc-btn--secondary {
  background: var(--pc-btn-secondary);
  color: var(--pc-text-primary);
  border: 1px solid var(--pc-card-border);
}

.pc-btn--secondary:hover {
  background: var(--pc-btn-hover);
  transform: translateY(-1px);
}

.pc-btn--ghost {
  background: transparent;
  color: var(--pc-text-secondary);
}

.pc-btn--ghost:hover {
  background: var(--pc-btn-hover);
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .pc-card {
    width: 100%;
    margin: 0;
  }
  
  .pc-btn {
    min-height: 44px;
    font-size: 16px;
  }
  
  .pc-mobile-sheet {
    overflow-y: auto;
    max-height: 85vh;
    -webkit-overflow-scrolling: touch;
  }
}

/* Badge utility styles */
.pc-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 8px;
  border-radius: var(--pc-pill);
  font-size: 11px;
  font-weight: 500;
  line-height: 1;
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
  backdrop-filter: blur(4px);
  text-transform: uppercase;
  letter-spacing: 0.025em;
  color: var(--pc-text-primary);
  transition: all 150ms ease;
}

.pc-badge--stage-completed {
  background: rgba(16, 185, 129, 0.18);
}

.pc-badge--stage-in_progress {
  background: rgba(59, 130, 246, 0.18);
}

.pc-badge--stage-pending {
  background: rgba(245, 158, 11, 0.18);
}

.pc-badge--stage-stalled {
  background: rgba(239, 68, 68, 0.18);
}

.pc-badge--stage-default {
  background: rgba(148, 163, 184, 0.18);
}

.pc-badge--score {
  background: rgba(59, 130, 246, 0.16);
}

.pc-badge--age {
  background: rgba(148, 163, 184, 0.16);
}

.pc-badge-group {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
}

/* Dropdown/Portal styles */
.pc-dropdown {
  z-index: 60;
  background: var(--pc-card-bg);
  border: 1px solid var(--pc-card-border);
  border-radius: var(--pc-radius-xl);
  backdrop-filter: blur(16px);
  box-shadow: var(--pc-card-glow);
  padding: 8px;
  min-width: 200px;
}

.pc-dropdown-item {
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 150ms ease;
  color: var(--pc-text-primary);
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.pc-dropdown-item:hover {
  background: var(--pc-btn-hover);
}

.pc-dropdown-item.danger {
  color: var(--pc-danger);
}

.pc-dropdown-item.danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

/* Scrollable tabs styling */
.scrollbar-thin {
  scrollbar-width: thin;
}

.scrollbar-thin::-webkit-scrollbar {
  height: 4px;
  width: 4px;
}

.scrollbar-track-transparent::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thumb-\[var\(--pc-border\)\]::-webkit-scrollbar-thumb {
  background: var(--pc-border);
  border-radius: 2px;
}

.scrollbar-thumb-\[var\(--pc-border\)\]::-webkit-scrollbar-thumb:hover {
  background: var(--pc-text-dim);
}

/* Case view tabs responsive layout */
@media (max-width: 768px) {
  .pc-case-tabs .pc-btn {
    min-width: 100px !important;
    font-size: 14px;
    padding: 8px 12px;
  }
  
  .pc-case-tabs .pc-btn svg {
    width: 16px;
    height: 16px;
  }
}

@media (min-width: 1024px) {
  .pc-case-tabs .pc-btn {
    min-width: 140px !important;
  }
}